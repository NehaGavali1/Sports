(function() { function bxBootstrap() {
	var re = /bot|crawl|slurp|spider|mediapartners|headlesschrome|snap-prefetch|remotasks|woorank|uptime\.com|facebookexternalhit|facebookcatalog/i;
	if (re.test(navigator.userAgent) || navigator.userAgent == '') {
		return;
	}

	if (!(window.bouncex&&bouncex.website)) {
		var pushedData = [];
		if(window.bouncex && bouncex.push && bouncex.length){
			pushedData = bouncex;
		}
		window.bouncex = {};
		bouncex.pushedData = pushedData;
		bouncex.website = {"id":4680,"name":"Tracksmith","cookie_name":"bounceClientVisit4680","domain":"tracksmith.com","ct":"bind_to_domain","ally":0,"ei":0,"tcjs":"","cjs":"","force_https":false,"waypoints":false,"content_width":900,"gai":"UA-50080500-1","swids":"","sd":0,"ljq":"auto","campaign_id":0,"is_preview":false,"aco":{"first_party_limit":"3500","local_storage":"1"},"cmp":{"gdpr":0,"gmp":0,"whitelist_check":0},"burls":[],"ple":false,"fbe":true,"mas":2,"map":1,"gar":true,"ete":1,"ettm":false,"etjs":"/* ---------------------------- SHARED VARIABLES ---------------------------- */\n\nvar CART_COOKIE_KEY = 'ts-cart';\n\n/* --------------------------------- HELPERS -------------------------------- */\n\nfunction getUrl() {\n    return bouncex.utils.url.allowParams();\n}\n\nfunction setVarAndCookie(varName, value) {\n    bouncex.setVar(varName, value);\n    bouncex.setBounceCookie();\n\n    return;\n}\n\n/* ------------------------------ ITEM TRACKING ----------------------------- */\n\nfunction getItemId(url) {\n    return (url || '').replace(/((\\?|#).+)/, '').split('/').pop();\n}\n\nfunction getItemImage() {\n    var imageUrl = bouncex.utils.getNestedProp('window.wdProduct.imageURL', ''),\n        visibleImg = getItemId(jQuery('.ProductPanel__grid .BaseImage img').attr('src'));\n    \n    return imageUrl.indexOf(visibleImg) > -1 ? bouncex.utils.url.allowParams([], imageUrl) : '';\n}\n\nfunction getInStock() {\n    if (jQuery('.SwatchRadio:visible').length > 0 || jQuery('.TextRadio:visible').length > 0) {\n        return jQuery('.SwatchRadio:visible:not(.is-disabled)').length > 0\n            || jQuery('.TextRadio:visible:not(.is-disabled)').length > 0;\n    }\n\n    return jQuery('.Product__button:visible:contains(Add)').length > 0;\n}\n\nfunction getItem() {\n    var itemUrl = jQuery('[rel=canonical]').attr('href') || '';\n\n    return {\n        id: getItemId(itemUrl),\n        copy: jQuery('.ProductPanel__title').text().trim(),\n        category: bouncex.utils.getNestedProp('window.__NUXT__.data[0].selectedAttributes.Category', 'default'),\n        url: itemUrl,\n        imageurl: getItemImage(),\n        price: bouncex.vars.prod_price || jQuery('.ProductPanel__price:visible').text().replace(/[^0-9.]/g, ''),\n        instock: getInStock()\n    };\n}\n\nfunction isExcluded(item) {\n    return item.url.indexOf('gift-card') > -1;\n}\n\nfunction initializeItemEvents() {\n    var item;\n\n    bouncex.et.onTrue(\n        function() {\n            item = getItem();\n            return !!item.id &&\n                   !!item.copy &&\n                   !!item.price &&\n                   !!item.url &&\n                   !!item.imageurl;\n        },\n        function() {\n            if (isExcluded(item)) {\n                return;\n            }\n\n            bouncex.push(['item', item]);\n    \n            bouncex.push(['view item', {\n                'item:id': item.id,\n                'item:itemgroupid' : item.id\n            }]);\n            \n            var skuConfig = {\n                    href: bouncex.utils.url.allowParams('sku'),\n                    getHref: function() {\n                        return bouncex.utils.url.allowParams('sku');\n                    },\n                    getId: function() {\n                        return item.id;\n                    }\n                };\n\n            initializeSkuEvents(skuConfig);\n            \n            initializeATCClickTracking(item.id);\n\n            return;\n        },\n        10\n    );\n\n    return;\n}\n\n/* ---------------------------- CATEGORY TRACKING --------------------------- */\n\nfunction getItemIdsCat() {\n    var ids = [],\n        $tiles = jQuery('.ProductCard .BaseLink'),\n        i = 0;\n\n    for (i; i < $tiles.length; i++ ) {\n        var url = $tiles.eq(i).attr('href') || '',\n            id = getItemId(url);\n\n        if (!id || ids.indexOf(id) > -1) {\n            continue;\n        }\n\n        ids[ids.length] = id;\n    }\n\n    return ids.join(',');\n}\n\nfunction getCategoryObject() {\n    return {\n        'page:url': getUrl(),\n        'items:ids': getItemIdsCat()\n    };\n}\n\nfunction initializeCategoryEvents() {\n    var categoryObj;\n\n    bouncex.et.onTrue(\n        function() {\n            categoryObj = getCategoryObject();\n            return !!categoryObj['items:ids'].length && \n                   !!categoryObj['page:url'];\n        },\n        function() {\n            bouncex.push(['view category', categoryObj]);\n\n            var skuConfig = {\n                getHref: function(el) {\n                    var href = jQuery(el).parents('.ProductCard').find('.BaseLink').attr('href') || '';\n    \n                    return href ? bouncex.utils.url.allowParams('sku', href) : '';\n                }, \n                getId: getItemId\n            };\n    \n            initializeSkuEvents(skuConfig);\n        },\n        10\n    );\n\n    return;\n}       \n\n/* ------------------------------- CART EVENTS ------------------------------ */\n\nfunction fireAddToCart(itemId) {\n    var token;\n\n    bouncex.et.onTrue(\n        function() { \n            token = bouncex.getBounceCookie(CART_COOKIE_KEY);\n            return token;\n        },\n        function() {\n            bouncex.push([\n                'add to cart',\n                {\n                    'item:id': itemId,\n                    'cart:token': token\n                }\n            ]);\n\n            if (bouncex.vars.cart) {\n                return;\n            }\n\n            setVarAndCookie('cart', true);\n\n            return;\n        },\n        10\n    );\n\n    return;\n}\n\nfunction initializeATCClickTracking(itemId) {\n    bouncex.et.on(jQuery(document), 'submit.bxatc', function() {\n        fireAddToCart(itemId);\n    }, '.ProductPanel form:visible');\n\n    return;\n}\n\nfunction initializeQuickViewATCTracking() {\n    bouncex.et.on(jQuery(document), 'submit.bxqvatc', function() {\n        var itemId = getItemId(jQuery(this).parents('.QuickBuy__content-item-wrapper').find('a.BaseLink').attr('href'));\n\n        fireAddToCart(itemId);\n    }, '.QuickBuyPanelContent__atc form:visible');\n}\n\nfunction emptyCart() {\n    if (getUrl().indexOf('checkout.tracksmith.com') > -1) {\n        return;\n    }\n\n    bouncex.et.onVarChange('cart_qty', function(oldVal, newVal) {\n        if (bouncex.vars.cart && newVal === 0 && oldVal > 0) {\n            bouncex.push(['empty_cart']);\n            setVarAndCookie('cart', false);\n        }\n\n        return;\n    });\n\n    return;\n}\n\nfunction initializeCartEvents() {\n    bouncex.et.cart.init({\n        replenishmentType: 'cookie',\n        replenish: function(cart) {\n            bouncex.utils.cookies.create({\n                name: CART_COOKIE_KEY,\n                value: cart.token\n            });\n            window.location.href = window.location.origin + \n                                   window.location.pathname + \n                                   '?bx_replen=true';\n            return;\n        }\n    });\n\n    emptyCart();\n\n    return;\n}\n\n/* ------------------------------ SKU TRACKING ------------------------------ */\n\nfunction initializeSkuEvents(config) {\n    var prevHref = config.href || '',\n        href;\n    bouncex.et.on(\n        jQuery(document),\n        'click.bxsku',\n        function() {\n            var el = this;\n\n            // The website simulates a click on the swatch you were on at the same time that you click a new swatch,\n            // so this branch makes sure that the click on the old swatch doesn't get through.\n            if (!prevHref) {\n                prevHref = config.getHref(el);\n            }\n\n            bouncex.et.onTrue(function() {\n                href = config.getHref(el);\n\n                return !!href && href !== prevHref;\n            }, function() {\n                prevHref = href;\n\n                var id = config.getId(href);\n\n                bouncex.push([\n                    'select_sku',\n                    {\n                        'item:id': id,\n                        'item:itemgroupid': id,\n                        'item:feedid': bouncex.utils.url.getParam('sku'),\n                    }\n                ]);\n                return;\n            }, 5);\n        },\n        '.SwatchRadio:visible, .TextRadio:visible'\n    );\n\n    return;\n}\n\n/* ------------------------------ USER TRACKING ----------------------------- */\n\nfunction getUserEmail() {\n    return jQuery('dd:contains(@)').text() || bouncex.utils.getNestedProp('swellConfig.customer.email', '');\n}\n\nfunction initializeUserTracking() {\n    var userEmail;\n\n    if (!bouncex.vars.logged_in || !!bouncex.vars.logged_in_identified) {\n        return;\n    }\n\n    bouncex.et.onTrue(\n        function() {\n            userEmail = getUserEmail();\n            return bouncex.utils.validate.email(userEmail);\n        },\n        function() {\n            bouncex.push([\n                'user',\n                {\n                    'email': userEmail,\n                    'source': 'LoggedIn'\n                }\n            ]);\n\n            setVarAndCookie('logged_in_identified', true);\n        }, \n        10\n    );\n}\n\n/* --------------------------- INITIALIZE TRACKING -------------------------- */\n\nfunction isValidDomain() {\n    var url = window.location.host,\n        validDomains = ['www.tracksmith.com', 'tracksmith.com', 'account.tracksmith.com', 'checkout.tracksmith.com'];\n\n    for (var i = 0; i < validDomains.length; i++) {\n        if (url.indexOf(validDomains[i]) > -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction isUS() {\n    return (bouncex && bouncex.state && bouncex.state.geo && bouncex.state.geo.country === 'US') || bouncex.vars.country === \"united states of america\" || bouncex.website.pts === 'checkout';\n}\n\nfunction isEn() {\n    return (jQuery('html').attr('lang') || '').indexOf('en') > -1;\n}\n\nfunction isValidForTracking() {\n    return isValidDomain() && isEn() && isUS();\n}\n\nfunction getPageType() {\n    var url = getUrl();\n\n    // The URL check here serves the second purpose of helping to filter out non-US sites\n    if (document.querySelectorAll('.CollectionPage').length > 0 && url.indexOf('tracksmith.com/collections') > -1) {\n        return 'category';\n    }\n\n    if (document.querySelectorAll('.ProductPageTemplate').length > 0 \n        && url.indexOf('tracksmith.com/products') > -1 \n        && getUrl().indexOf('gift-card') === -1) {\n        return 'product';\n    }\n}\n\nfunction init() {\n    bouncex.setTimeout2(function() {\n        if (!isValidForTracking()) {\n            return;\n        }\n\n        bouncex.setTimeout2(initializeUserTracking, 1500);\n        initializeCartEvents();\n        initializeQuickViewATCTracking();\n\n        switch(getPageType()) {\n            case 'category':\n                initializeCategoryEvents();\n                break;\n            case 'product':\n                initializeItemEvents();\n                break;\n            default:\n                break;\n        }\n    }, 500)\n}\n\ninit();\n","dge":true,"bxidLoadFirst":false,"pie":true,"cme":true,"gbi_enabled":0,"bpush":false,"pt":{"cart":{"testmode":true,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":""}]]},"category":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('.CollectionPage').length > 0;"}]]},"checkout":{"testmode":false,"val":[[{"activation":"current_page_url","prop":"contains","prop2":"","prop3":"","val":"/checkouts/"}],[{"activation":"current_page_url","prop":"not_contains","prop2":"","prop3":"","val":"thank_you"}]]},"home":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('link[rel=\"canonical\"][href=\"https://www.tracksmith.com/\"]').length > 0;"}],[{"activation":"current_page_url","prop":"not_contains","prop2":"","prop3":"","val":"/pages"}]]},"product":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"document.querySelectorAll('.ProductPageTemplate').length > 0;"}],[{"activation":"current_page_url","prop":"not_contains","prop2":"","prop3":"","val":"gift-card"}]]},"search":{"testmode":true,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":""}]]}},"els":{"blank_site_element":""},"vars":[{"name":"logged_in","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"(function(){\n\tif (bouncex.website.pts === 'checkout' && jQuery('.breadcrumb__item--current').text().toLowerCase().indexOf('information') > -1) {\n\t\treturn jQuery('.logged-in-customer-information:visible').length > 0;\n\t} else if (window.location.pathname.indexOf('/account') > -1) {\n\t\treturn jQuery('#customer_logout_link:visible').length > 0;\n\t}\n\treturn null;\n})();","trigger":""},{"name":"ever_logged_in","polling":"all","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.logged_in || null;","trigger":""},{"name":"cart_qty","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"0","code":"(function () {\n    var qty;\n     if (window.location.href.indexOf('/login') > -1) {\n        return null;\n    }\n    if (jQuery('.Cart__body').children().length === 0) {\n        return 0;\n    }\n    if (bouncex.website.pts === 'checkout') {\n        qty = 0;\n        jQuery(\".product .product__quantity\").each(function (index) {\n            qty += Number(jQuery(this).text().trim());\n        });\n        return qty;\n    }\n\n    return Number(jQuery('.CartBtn__count:first').text().replace(/[^0-9.]/g, '')) || null;\n})();","trigger":"pageload"},{"name":"cart_value","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"0","code":"(function () {\r\n    if (window.location.href.indexOf('/login') > -1) {\r\n        return null;\r\n    }\r\n    if (jQuery('.Cart__body').children().length === 0) {\r\n        return 0;\r\n    }\r\n    if (bouncex.website.pts === 'checkout') {\r\n       return Number(jQuery('[data-checkout-subtotal-price-target]:first').text().replace(/[^0-9.]/g, ''));\r\n    }\r\n    return Number(jQuery('.Cart__total-price:first').text().replace(/[^0-9.]/g, '')) || null;\r\n})();","trigger":""},{"name":"prod_price","polling":"all","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"Number(jQuery('.ProductPanel__price:first').text().replace(/[^0-9.]/g, ''));","trigger":""},{"name":"prod_name","polling":"all","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"jQuery('.ProductPanel__title:first').text().trim();","trigger":""},{"name":"in_stock","polling":"all","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"jQuery('.ProductPanel__atc').text().toLowerCase().indexOf('add to cart') > -1;","trigger":""},{"name":"submitted_onsite","polling":"all","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"jQuery('.NewsletterForm').text().indexOf('subscribing') > -1 || null;","trigger":""},{"name":"page_url","polling":"none","persist":"no","page_types":["category","search"],"testmode":true,"default":"false","code":"","trigger":""},{"name":"cart_token","polling":"none","persist":"no","page_types":[],"testmode":true,"default":"false","code":"null;","trigger":"pageload"},{"name":"cart_items","polling":"none","persist":"no","page_types":[],"testmode":true,"default":"false","code":"null;","trigger":"pageload"},{"name":"cart","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"cookie_modal_present","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.ju_Con:first:visible').length > 0;","trigger":"pageload"},{"name":"logged_in_identified","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"previous_url","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"previous_sku","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"previous_pdp_url","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"previous_category_url","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"country","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"jQuery('.flow-country-picker-modal-trigger-text').text().trim().toLowerCase() || null;","trigger":"pageload"}],"dgu":"pixel.cdnwidget.com","dgp":false,"ba":{"enabled":0,"fbte":0},"biu":"assets.bounceexchange.com","bau":"api.bounceexchange.com","beu":"events.bouncex.net","ibx":{"tjs":"","cjs":"","miw":0,"mibcx":1,"te":1,"cart_rep":{"get":"","set":""},"ulpj":{"bxid":"espemailid"},"cus":"","miw_exclude":"","enabled":1},"etjson":null,"osre":true,"osru":"osr.bounceexchange.com/v1/osr/items","checkDfp":false,"gamNetwork":"","spa":1,"spatm":0,"preinit_cjs":"","crs":{"integrations":null,"pageCount":null},"mat":0,"math":0,"cpnu":"coupons.bounceexchange.com","dfpcms":0,"sms":{"optm":"","eventSharing":false,"shqId":"","enabled":0},"pde":true,"fmc":["US"],"fme":true,"fmx":"","sdk":{"android":{"enabled":false,"enabledVersions":[],"eventModifications":null},"ios":{"enabled":false,"enabledVersions":[],"eventModifications":null}},"onsite":{"enabled":1},"ads":{"enabled":0},"pubs":{"enabled":0},"ga4_property_id":"260506223","ga4_measurement_id":"G-14V7LHG37W"}
;
		bouncex.tag = 'tag3';
		bouncex.$ = window.jQuery;
		bouncex.env = 'production';
		bouncex.restrictedTlds = {"casl":{"ca":1},"gdpr":{"ad":1,"al":1,"at":1,"ax":1,"ba":1,"be":1,"bg":1,"by":1,"xn--90ais":1,"ch":1,"cy":1,"cz":1,"de":1,"dk":1,"ee":1,"es":1,"eu":1,"fi":1,"fo":1,"fr":1,"uk":1,"gb":1,"gg":1,"gi":1,"gr":1,"hr":1,"hu":1,"ie":1,"im":1,"is":1,"it":1,"je":1,"li":1,"lt":1,"lu":1,"lv":1,"mc":1,"md":1,"me":1,"mk":1,"xn--d1al":1,"mt":1,"nl":1,"no":1,"pl":1,"pt":1,"ro":1,"rs":1,"xn--90a3ac":1,"ru":1,"su":1,"xn--p1ai":1,"se":1,"si":1,"sj":1,"sk":1,"sm":1,"ua":1,"xn--j1amh":1,"va":1,"tr":1}};
		bouncex.client = {
			supportsBrotli: 1
		};
		bouncex.assets = {"ads":"7583a3b55cf682db906e10c5dfec09b5","creativesBaseStyles":"a53944a2","inbox":"9ffb0afbd53abff968999e9ed3f418a5","onsite":"352ad239e11d59b8275f1f3594e9c977","sms":"bd8baee2c85b4f3e89c5a3210b2414dd"};
		bouncex.push = function(pushData) {
			bouncex.pushedData.push(pushData);
		}

		var runtime = document.createElement('script');
		runtime.setAttribute('src', '//assets.bounceexchange.com/assets/smart-tag/versioned/runtime_b4ad65fa381da0648767eee58152de5e.br.js');
		runtime.setAttribute('async', 'async');
		runtime.setAttribute('onload', 'bouncex.initializeTag()');

		bouncex.initializeTag = function() {
			var script = document.createElement('script');
			script.setAttribute('src', '//assets.bounceexchange.com/assets/smart-tag/versioned/main-v2_46fda4c4cd50b5cb3297856d2cfd7fd9.br.js');
			script.setAttribute('async', 'async');
			document.body.appendChild(script);


			var deviceGraphScript = document.createElement('script');
			deviceGraphScript.setAttribute('src', '//assets.bounceexchange.com/assets/smart-tag/versioned/cjs_min_74cb4632fbcf5cdfa301cb523939aa09.js');
			deviceGraphScript.setAttribute('async', 'async');
			var dgAttrs = [{"Key":"id","Value":"c.js"},{"Key":"async","Value":"true"},{"Key":"data-apikey","Value":"2^HIykD"},{"Key":"data-cb","Value":"bouncex.dg.initPostDeviceGraph"},{"Key":"data-bx","Value":"1"},{"Key":"data-gm","Value":"1"},{"Key":"data-fire","Value":"1"}];
			if (dgAttrs) {
				for (var i = 0; i < dgAttrs.length; i++) {
					deviceGraphScript.setAttribute(dgAttrs[i].Key, dgAttrs[i].Value);
				}
			}
			document.body.appendChild(deviceGraphScript);

			bouncex.initializeTag = function() {};
		};

		document.body.appendChild(runtime);

	}


}

if (document.readyState === "loading") {
	document.addEventListener("DOMContentLoaded", bxBootstrap);
} else {
	bxBootstrap();
}})();