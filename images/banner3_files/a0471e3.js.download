(window.webpackJsonp=window.webpackJsonp||[]).push([[1,51,52],{1e3:function(t,e,n){t.exports={}},1023:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(35),n(55);var o=n(12),r=n(1034),c=n(75),l=(n(7),n(6),n(9),n(5),n(10),n(2)),f=n(80);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={duration:.5,ease:"power1.inOut"},h={from:{opacity:0,y:"100%",height:0},to:{opacity:1,y:"0%",height:"auto"}};f.a.defaults({duration:m.duration,ease:m.ease});var y=function(t,e){f.a.fromTo(t,d({},h.from),d(d({},h.to),{},{duration:.3,delay:0,onComplete:e}))},_=function(t,e){var n=f.a.timeline(),o=t.getBoundingClientRect().height;n.fromTo(t,d(d({},h.to),{},{height:o}),d(d({},h.from),{},{duration:.3,delay:0,onComplete:e}))},O={name:"Hotspot",props:{content:{type:Object,required:!0},isQuickBuyPanelOpen:{type:Boolean,default:function(){return!1}}},setup:function(t){var e=Object(o.toRefs)(t).isQuickBuyPanelOpen,n=Object(o.ref)(null),l=Object(o.ref)(null),f=Object(r.useWindowSize)().height,v=Object(r.useElementBounding)(n),d=v.height,m=v.top,h=v.bottom,O=Object(r.useElementBounding)(l).height,j=Object(r.useMediaQuery)("(max-width: 899px)"),k=Object(r.useElementVisibility)(l),C=Object(o.ref)(!1),B=Object(o.ref)(!1),H=Object(o.ref)(0),w=Object(o.computed)((function(){var t=["Hotspot"];return j.value?(C.value||B.value)&&t.push("Hotspot--active"):C.value&&t.push("Hotspot--active"),t})),P=Object(o.computed)((function(){var t=["Hotspot__content"];return!C.value&&B.value&&t.push("Hotspot__content--closing"),t})),x=Object(o.computed)((function(){var style={position:"absolute",right:j.value?"".concat(16,"px"):"".concat(32,"px"),bottom:j.value?"".concat(16,"px"):"".concat(32,"px"),transform:"translateY(0)"};if(!j.value)if(64!==O.value)style.transform="translateY(-".concat(O.value-64,"px)");else if(m.value<f.value){var t=f.value-m.value;t>Math.max(.15*d.value,104)&&t<d.value&&(style.transform="translateY(-".concat(d.value-t,"px)"))}return style})),I=function(){B.value&&Object(c.c)(n.value)};Object(r.useResizeObserver)(n,(function(t){j.value?C.value&&A(!0):A(!1),I()}));var A=function(t){window.$nuxt.$emit("setHeaderScrollCtrl",!t)};return Object(o.onBeforeUnmount)((function(){A(!1),Object(c.a)()})),Object(o.watch)(C,(function(t){if(H.value=clearTimeout(H.value),t){if(!k.value){var e=h.value-f.value;window.scrollTo({top:window.scrollY+e+32,left:0,behavior:"smooth"})}B.value=!0}else{j.value&&A(!1),H.value=setTimeout((function(){B.value=!1,j.value&&Object(c.c)(n.value)}),300)}})),Object(o.watch)(e,(function(){I()})),{getProductsByFrameSize:function(t){var e=t.filter((function(data){return data.product.attributes})),n=Math.floor(d.value/110);return e.slice(0,n)},hotspotRoot:n,hotspotContent:l,hotspotStyling:x,isActive:C,isMobileView:j,isShowingItems:B,onClickHotspotButton:function(){C.value=!C.value},onEnter:function(t,e){return j.value?e():y(t,e)},onLeave:function(t,e){return j.value?e():_(t,e)},rootClassArray:w,contentClassArray:P}}},j=(n(1158),n(1)),component=Object(j.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"hotspotRoot",class:t.rootClassArray,on:{click:function(e){if(e.target!==e.currentTarget)return null;t.isActive=!0}}},[n("div",{staticClass:"Hotspot__mask"}),t._v(" "),n("div",{ref:"hotspotContent",class:t.contentClassArray},[t.isMobileView&&t.isActive?n("AbstractButton",{staticClass:"HotspotButton HotspotButton__close Hotspot__content-button",on:{click:function(e){t.isActive=!1}}},[n("BaseIcon",{staticClass:"HotspotButton__icon",attrs:{name:"icon-pure-cross--large","override-default-size":!0}})],1):t._e(),t._v(" "),n("TransitionGroup",{staticClass:"Hotspot__items",attrs:{css:!1,tag:"div"},on:{enter:t.onEnter,leave:t.onLeave}},[t.isActive?n("div",{key:"his-1",staticClass:"Hotspot__items"},t._l(t.getProductsByFrameSize(t.content.products),(function(t){return n("HotspotItem",{key:"hsi-"+t.product.id,attrs:{content:t}})})),1):t._e()])],1),t._v(" "),n("HotspotButton",{style:t.hotspotStyling,attrs:{"button-text":t.content.buttonText,"is-active":t.isShowingItems},on:{click:t.onClickHotspotButton}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseIcon:n(82).default,AbstractButton:n(212).default,HotspotItem:n(1117).default,HotspotButton:n(1118).default})},1046:function(t,e,n){"use strict";n(999)},1047:function(t,e,n){"use strict";n(1e3)},1076:function(t,e,n){t.exports={}},1117:function(t,e,n){"use strict";n.r(e);n(35),n(22),n(52),n(28),n(6),n(36),n(40),n(27);var o=n(8),r=(n(34),n(11),n(44),n(15),n(51),n(3),n(353)),c=n(91);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){l=!0,r=t},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw r}}}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var v={name:"HotspotItem",props:{content:{type:Object,required:!0}},computed:{productData:function(){return Object(r.a)(this.content.product.attributes)},displayVariant:function(){return this.getDisplayVariant(this.content)},image:function(){var image=this.displayVariant.media.url,t=image.split("/"),e=t[t.length-1],n=t[t.length-2]||"products";return{src:"https://res.cloudinary.com/tracksmith/image/upload/fl_lossy,dpr_2,q_80,w_80,h_80,c_fill,f_jpg/store/".concat(n,"/").concat(e),placeholder:"https://res.cloudinary.com/tracksmith/image/upload/fl_lossy,dpr_1,q_30,w_10,h_10,e_blur:30,c_fill,f_jpg/store/".concat(n,"/").concat(e)}},activeVariantHasCachedLocalPrice:function(){return!!this.$store.getters["prices/getPriceObjById"](this.displayVariant.commerceId)},isLocalPricing:function(){var t;return(null===(t=this.$i18n)||void 0===t?void 0:t.locale)&&"us"!==this.$i18n.locale},variantPrice:function(){return this.isLocalPricing&&this.activeVariantHasCachedLocalPrice?null===(t=this.$store.getters["prices/getPriceObjById"](this.displayVariant.commerceId))||void 0===t||null===(e=t.price)||void 0===e?void 0:e.amount:this.displayVariant.price;var t,e},price:function(){var t=this.variantPrice;return Object(c.a)({price:t,activeLocale:this.$i18n.locale})},priceParts:function(){var t=this.variantPrice;return Object(c.a)({price:t,activeLocale:this.$i18n.locale,toParts:!0})}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isLocalPricing){e.next=4;break}if(t.activeVariantHasCachedLocalPrice){e.next=4;break}return e.next=4,t.getLocalisedPricing();case 4:case"end":return e.stop()}}),e)})))()},methods:{mapProductData:r.a,getDisplayVariant:function(data){var t,e,n,o=l((null==data||null===(t=data.displayVariantGroup)||void 0===t?void 0:t.variants.split(","))||[]);try{var r=function(){var t=n.value,o=data.product.attributes.variants.find((function(e){return e.sku===t}));if(o)return e=o,"break"};for(o.s();!(n=o.n()).done;){if("break"===r())break}}catch(t){o.e(t)}finally{o.f()}return e||data.product.attributes.variants[0]},getLocalisedPricing:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.pricingIsLoading=!0,e.next=3,t.$store.dispatch("prices/getVariantPricing",{variantId:t.displayVariant.commerceId}).then((function(){t.pricingIsLoading=!1}));case 3:case"end":return e.stop()}}),e)})))()}}},d=(n(1046),n(1)),component=Object(d.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"HotspotItem"},[n("div",{staticClass:"HotspotItem__media"},[t.image?n("Frame",{staticClass:"HotspotItem__thumbnail",attrs:{"aspect-ratio":"1:1"}},[n("BaseImage",{attrs:{placeholder:t.image.placeholder,width:80,height:80,src:t.image.src}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"HotspotItem__body"},[n("Copy",[t._v("\n      "+t._s(t.productData.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"HotspotItem__links"},[t.content.quickBuyLinks.length>0?t._l(t.content.quickBuyLinks,(function(link){return n("QuickBuyLink",{key:link.id,attrs:{product:t.mapProductData(link.product.attributes),"active-variant":t.getDisplayVariant(link),"button-text":link.label}})})):[n("QuickBuyLink",{attrs:{product:t.productData,"active-variant":t.displayVariant,"button-text":"Shop"}})]],2)],1),t._v(" "),n("div",{staticClass:"HotspotItem__meta"},[n("div",{staticClass:"HotspotItem__meta__price"},[n("Copy",{attrs:{size:"small"}},[t._v("\n        "+t._s(t.priceParts.currencySymbol)+"\n      ")]),t._v(" "),n("Copy",[t._v(t._s(t.priceParts.amount))])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseImage:n(115).default,Frame:n(129).default,Copy:n(99).default,QuickBuyLink:n(579).default})},1118:function(t,e,n){"use strict";n.r(e);n(55);var o={name:"HotspotButton",props:{buttonText:{type:String,default:function(){return"shop the look"}},isActive:{type:Boolean,default:function(){return!1}}},data:function(){return{isClicked:!1}},computed:{buttonLabel:function(){var t;return null!==(t=this.buttonText)&&void 0!==t?t:"shop the look"},buttonClasses:function(){var t=["HotspotButton"];return this.isActive&&t.push("HotspotButton--active","HotspotButton__close"),this.isClicked&&t.push("HotspotButton--clicked"),t},iconName:function(){return this.isActive?"icon-pure-cross--large":"icon-shopping-bag"}},methods:{onClick:function(t){var e=this;this.isClicked=!0;var n=setTimeout((function(){e.isClicked=!1,e.$emit("click",t),clearTimeout(n)}),100)}}},r=(n(1047),n(1)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("AbstractButton",{class:t.buttonClasses,on:{click:function(e){return t.onClick(e)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n("BaseIcon",{staticClass:"HotspotButton__icon",attrs:{name:t.iconName,"override-default-size":!0}}),t._v(" "),n("Heading",{staticClass:"HotspotButton__text",attrs:{family:"sans",size:"h6--small",tag:"p"}},[t._v("\n      "+t._s(t.buttonLabel)+"\n    ")])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseIcon:n(82).default,Heading:n(71).default,AbstractButton:n(212).default})},1158:function(t,e,n){"use strict";n(1076)},999:function(t,e,n){t.exports={}}}]);